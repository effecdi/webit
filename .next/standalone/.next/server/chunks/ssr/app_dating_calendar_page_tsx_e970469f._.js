module.exports=[88183,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(60493),e=a.i(46886),f=a.i(84980),g=a.i(32267),h=a.i(19113),i=a.i(76929),j=a.i(31799),k=a.i(96826),l=a.i(30505);let m={me:{bg:"bg-pink-500",dot:"bg-pink-400",light:"bg-pink-50"},you:{bg:"bg-blue-500",dot:"bg-blue-400",light:"bg-blue-50"},we:{bg:"bg-purple-500",dot:"bg-purple-400",light:"bg-purple-50"}},n={me:"나",you:"상대",we:"우리"};function o(){let[a,o]=(0,c.useState)(new Date),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)({title:"",time:"",location:"",owner:"we"});(0,c.useEffect)(()=>{F()},[]);let F=async()=>{w(!0);try{let a=await fetch("/api/events?mode=dating"),b=await a.json();u(b.map(a=>({...a,date:a.date.split("T")[0]})))}catch(a){console.error("Error fetching schedules:",a)}finally{w(!1)}},G=a.getFullYear(),H=a.getMonth(),I=new Date(G,H,1).getDay(),J=new Date(G,H+1,0).getDate(),K=[];for(let a=0;a<I;a++)K.push(null);for(let a=1;a<=J;a++)K.push(a);let L=a=>"me"===a?"me":"you"===a?"you":"we",M=a=>{y(a),E({title:a.title,time:a.time||"",location:a.location||"",owner:L(a.category)}),q(a.date),s(!0)},N=a=>{C(a),A(!0)},O=async()=>{if(B){try{await fetch(`/api/events?id=${B.id}`,{method:"DELETE"}),u(t.filter(a=>a.id!==B.id))}catch(a){console.error("Error deleting schedule:",a)}C(null),A(!1)}},P=async()=>{if(D.title&&p){try{if(x)await fetch("/api/events",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:x.id,title:D.title,date:p,time:D.time||void 0,location:D.location||void 0,category:D.owner})}),u(t.map(a=>a.id===x.id?{...a,title:D.title,date:p,time:D.time||void 0,location:D.location||void 0,category:D.owner}:a));else{let a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:D.title,date:p,time:D.time||void 0,location:D.location||void 0,category:D.owner,mode:"dating"})}),b=await a.json();u([...t,{...b,date:b.date.split("T")[0]}])}}catch(a){console.error("Error saving schedule:",a)}E({title:"",time:"",location:"",owner:"we"}),y(null),s(!1)}},Q=()=>{E({title:"",time:"",location:"",owner:"we"}),y(null),s(!1)},R=p?t.filter(a=>a.date===p):[];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"px-5 pt-5 pb-5 max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"bg-white rounded-[20px] shadow-weve overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#F2F4F6]",children:[(0,b.jsx)("button",{onClick:()=>o(new Date(G,H-1,1)),className:"p-2 rounded-full hover:bg-[#F2F4F6]",children:(0,b.jsx)(d.ChevronLeft,{className:"w-5 h-5 text-[#4E5968]"})}),(0,b.jsxs)("h2",{className:"text-[18px] font-bold text-[#191F28]",children:[G,"년 ",H+1,"월"]}),(0,b.jsx)("button",{onClick:()=>o(new Date(G,H+1,1)),className:"p-2 rounded-full hover:bg-[#F2F4F6]",children:(0,b.jsx)(e.ChevronRight,{className:"w-5 h-5 text-[#4E5968]"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 text-center text-[13px] font-medium text-[#8B95A1] py-3 border-b border-[#F2F4F6]",children:["일","월","화","수","목","금","토"].map(a=>(0,b.jsx)("div",{className:"일"===a?"text-[#FF6B6B]":"토"===a?"text-[#3182F6]":"",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 p-3",children:K.map((a,c)=>{let d,e=a?(d=`${G}-${String(H+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,t.filter(a=>a.date===d)):[],f=a===new Date().getDate()&&H===new Date().getMonth()&&G===new Date().getFullYear();return(0,b.jsx)("button",{onClick:()=>a&&void(q(`${G}-${String(H+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`),s(!0)),disabled:!a,className:`aspect-square p-1 rounded-[10px] flex flex-col items-center justify-start gap-0.5 transition-colors ${a?"hover:bg-[#F2F4F6]":""} ${f?"bg-pink-50":""}`,children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:`text-[14px] font-medium ${f?"text-pink-500 font-bold":c%7==0?"text-[#FF6B6B]":c%7==6?"text-[#3182F6]":"text-[#333D4B]"}`,children:a}),(0,b.jsx)("div",{className:"flex gap-0.5 flex-wrap justify-center",children:e.slice(0,3).map(a=>(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${m[L(a.category)].dot}`},a.id))})]})},c)})})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-4 mb-4",children:["me","you","we"].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${m[a].dot}`}),(0,b.jsx)("span",{className:"text-[13px] text-[#8B95A1]",children:n[a]})]},a))}),(0,b.jsx)("h3",{className:"text-[17px] font-bold text-[#191F28] mb-3",children:"다가오는 일정"}),v?(0,b.jsx)("div",{className:"py-8 text-center text-[#8B95A1]",children:"로딩 중..."}):0===t.length?(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)("p",{className:"text-[#8B95A1] text-[14px]",children:"등록된 일정이 없어요"}),(0,b.jsx)("p",{className:"text-[#B0B8C1] text-[12px] mt-1",children:"날짜를 클릭해서 일정을 추가해보세요"})]}):(0,b.jsx)("div",{className:"space-y-2",children:t.filter(a=>new Date(a.date)>=new Date(new Date().toISOString().split("T")[0])).sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime()).slice(0,5).map(a=>(0,b.jsx)("div",{className:`p-4 rounded-[16px] ${m[L(a.category)].light}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[15px] font-medium text-[#191F28]",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-[13px] text-[#8B95A1]",children:[(0,b.jsx)("span",{children:a.date.replace(/-/g,".")}),a.time&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.time})]})]}),a.location&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-[12px] text-[#8B95A1]",children:[(0,b.jsx)(h.MapPin,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.location})]})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("button",{onClick:()=>M(a),className:"p-1.5 rounded-full hover:bg-white/50",children:(0,b.jsx)(j.Edit2,{className:"w-4 h-4 text-[#8B95A1]"})}),(0,b.jsx)("button",{onClick:()=>N(a),className:"p-1.5 rounded-full hover:bg-white/50",children:(0,b.jsx)(k.Trash2,{className:"w-4 h-4 text-[#8B95A1]"})})]})]})},a.id))})]})]}),r&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center px-5",onClick:Q,children:(0,b.jsxs)("div",{className:"bg-white rounded-[24px] w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-5 pt-5 pb-3 border-b border-[#F2F4F6]",children:[(0,b.jsx)("h3",{className:"text-[17px] font-bold text-[#191F28]",children:x?"일정 수정":"새 일정"}),(0,b.jsx)("button",{onClick:Q,className:"p-2 rounded-full hover:bg-[#F2F4F6]",children:(0,b.jsx)(g.X,{className:"w-5 h-5 text-[#8B95A1]"})})]}),R.length>0&&!x&&(0,b.jsxs)("div",{className:"px-5 py-3 border-b border-[#F2F4F6]",children:[(0,b.jsx)("p",{className:"text-[13px] text-[#8B95A1] mb-2",children:"이 날의 일정"}),R.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${m[L(a.category)].dot}`}),(0,b.jsx)("span",{className:"text-[14px] text-[#333D4B]",children:a.title})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("button",{onClick:()=>M(a),className:"p-1",children:(0,b.jsx)(j.Edit2,{className:"w-4 h-4 text-[#8B95A1]"})}),(0,b.jsx)("button",{onClick:()=>N(a),className:"p-1",children:(0,b.jsx)(k.Trash2,{className:"w-4 h-4 text-[#8B95A1]"})})]})]},a.id))]}),(0,b.jsxs)("div",{className:"p-5 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[13px] text-[#8B95A1] mb-1 block",children:"일정 제목"}),(0,b.jsx)("input",{type:"text",value:D.title,onChange:a=>E({...D,title:a.target.value}),placeholder:"일정을 입력하세요",className:"w-full px-4 py-3 bg-[#F2F4F6] rounded-[12px] text-[15px] focus:outline-none focus:ring-2 focus:ring-pink-300","data-testid":"input-schedule-title"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[13px] text-[#8B95A1] mb-1 block",children:"시간"}),(0,b.jsx)("input",{type:"time",value:D.time,onChange:a=>E({...D,time:a.target.value}),className:"w-full px-4 py-3 bg-[#F2F4F6] rounded-[12px] text-[15px] focus:outline-none focus:ring-2 focus:ring-pink-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[13px] text-[#8B95A1] mb-1 block",children:"장소"}),(0,b.jsx)("input",{type:"text",value:D.location,onChange:a=>E({...D,location:a.target.value}),placeholder:"장소",className:"w-full px-4 py-3 bg-[#F2F4F6] rounded-[12px] text-[15px] focus:outline-none focus:ring-2 focus:ring-pink-300"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[13px] text-[#8B95A1] mb-2 block",children:"담당"}),(0,b.jsx)("div",{className:"flex gap-2",children:["me","you","we"].map(a=>(0,b.jsx)("button",{onClick:()=>E({...D,owner:a}),className:`flex-1 py-2.5 rounded-[10px] text-[14px] font-medium transition-colors ${D.owner===a?`${m[a].bg} text-white`:`${m[a].light} text-[#4E5968]`}`,children:n[a]},a))})]})]}),(0,b.jsx)("div",{className:"px-5 pb-5",children:(0,b.jsx)("button",{onClick:P,disabled:!D.title,className:"w-full py-4 bg-pink-500 hover:bg-pink-600 disabled:bg-[#E5E8EB] disabled:cursor-not-allowed text-white font-bold rounded-[14px] transition-colors","data-testid":"button-save-schedule",children:x?"수정하기":"저장하기"})})]})}),z&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center px-5",children:(0,b.jsxs)("div",{className:"bg-white rounded-[24px] w-full max-w-xs p-6 text-center",children:[(0,b.jsx)("h3",{className:"text-[17px] font-bold text-[#191F28] mb-2",children:"일정 삭제"}),(0,b.jsx)("p",{className:"text-[14px] text-[#8B95A1] mb-5",children:"이 일정을 삭제할까요?"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{A(!1),C(null)},className:"flex-1 py-3 bg-[#F2F4F6] text-[#4E5968] font-medium rounded-[12px]",children:"취소"}),(0,b.jsx)("button",{onClick:O,className:"flex-1 py-3 bg-[#FF6B6B] text-white font-medium rounded-[12px]",children:"삭제"})]})]})}),(0,b.jsx)("button",{onClick:()=>{q(new Date().toISOString().split("T")[0]),s(!0)},className:"fixed bottom-24 right-5 z-40 w-14 h-14 bg-pink-500 hover:bg-pink-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95","data-testid":"button-add-schedule-fab",children:(0,b.jsx)(f.Plus,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"h-20"}),(0,b.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-[#E5E8EB] pb-safe",children:(0,b.jsxs)("div",{className:"flex justify-around items-center h-16 max-w-md mx-auto px-5",children:[(0,b.jsxs)(l.default,{href:"/dating",className:"flex flex-col items-center gap-1 text-[#8B95A1]",children:[(0,b.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-6 h-6",children:(0,b.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})})}),(0,b.jsx)("span",{className:"text-[10px]",children:"홈"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1 text-pink-500",children:[(0,b.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-6 h-6",children:[(0,b.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),(0,b.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,b.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,b.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,b.jsx)("span",{className:"text-[10px] font-medium",children:"캘린더"})]}),(0,b.jsxs)(l.default,{href:"/dating/gallery",className:"flex flex-col items-center gap-1 text-[#8B95A1]",children:[(0,b.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-6 h-6",children:[(0,b.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,b.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,b.jsx)("path",{d:"M21 15l-5-5L5 21"})]})}),(0,b.jsx)("span",{className:"text-[10px]",children:"갤러리"})]}),(0,b.jsxs)(l.default,{href:"/dating/profile",className:"flex flex-col items-center gap-1 text-[#8B95A1]",children:[(0,b.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-6 h-6",children:[(0,b.jsx)("circle",{cx:"12",cy:"7",r:"4"}),(0,b.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"})]})}),(0,b.jsx)("span",{className:"text-[10px]",children:"프로필"})]})]})})]})}var p=a.i(64060);function q(){return(0,b.jsxs)("div",{className:"min-h-screen bg-[#F7F8FA] pb-20",children:[(0,b.jsx)(o,{}),(0,b.jsx)(p.DatingBottomNav,{})]})}a.s(["default",()=>q],88183)}];

//# sourceMappingURL=app_dating_calendar_page_tsx_e970469f._.js.map