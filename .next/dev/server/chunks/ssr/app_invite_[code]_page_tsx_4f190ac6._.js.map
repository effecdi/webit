{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/invite/%5Bcode%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, use } from \"react\"\nimport { Heart, Sparkles, ArrowRight, Home } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\n\ninterface InviteData {\n  inviterName: string | null\n  mode: string\n  status: string\n}\n\nconst MODE_CONFIG = {\n  dating: {\n    label: \"연애\",\n    welcomeAction: \"행복한 연애\",\n    gradient: \"from-pink-400 via-rose-400 to-pink-500\",\n    bgGradient: \"from-pink-50 via-white to-rose-50\",\n    darkBgGradient: \"dark:from-pink-950 dark:via-gray-950 dark:to-rose-950\",\n    iconColor: \"text-pink-400\",\n    buttonBg: \"bg-pink-500 hover:bg-pink-600\",\n    sparkleColor: \"text-pink-300\",\n    redirectPath: \"/dating\",\n  },\n  wedding: {\n    label: \"결혼\",\n    welcomeAction: \"행복한 결혼\",\n    gradient: \"from-blue-400 via-indigo-400 to-blue-500\",\n    bgGradient: \"from-blue-50 via-white to-indigo-50\",\n    darkBgGradient: \"dark:from-blue-950 dark:via-gray-950 dark:to-indigo-950\",\n    iconColor: \"text-blue-400\",\n    buttonBg: \"bg-blue-500 hover:bg-blue-600\",\n    sparkleColor: \"text-blue-300\",\n    redirectPath: \"/wedding\",\n  },\n  family: {\n    label: \"가족\",\n    welcomeAction: \"행복한 결혼생활\",\n    gradient: \"from-green-400 via-emerald-400 to-green-500\",\n    bgGradient: \"from-green-50 via-white to-emerald-50\",\n    darkBgGradient: \"dark:from-green-950 dark:via-gray-950 dark:to-emerald-950\",\n    iconColor: \"text-green-400\",\n    buttonBg: \"bg-green-500 hover:bg-green-600\",\n    sparkleColor: \"text-green-300\",\n    redirectPath: \"/family\",\n  },\n}\n\nexport default function InvitePage({ params }: { params: Promise<{ code: string }> }) {\n  const { code } = use(params)\n  const router = useRouter()\n  const [invite, setInvite] = useState<InviteData | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [showSplash, setShowSplash] = useState(true)\n  const [splashPhase, setSplashPhase] = useState<\"entering\" | \"visible\" | \"exiting\">(\"entering\")\n  const [isAccepting, setIsAccepting] = useState(false)\n\n  useEffect(() => {\n    const fetchInvite = async () => {\n      try {\n        const res = await fetch(`/api/couple-invite/lookup?code=${code}`)\n        if (!res.ok) {\n          setError(\"유효하지 않은 초대 코드입니다\")\n          setIsLoading(false)\n          return\n        }\n        const data = await res.json()\n        setInvite(data.invite)\n      } catch {\n        setError(\"초대 정보를 불러올 수 없습니다\")\n      } finally {\n        setIsLoading(false)\n      }\n    }\n    fetchInvite()\n  }, [code])\n\n  useEffect(() => {\n    if (!invite) return\n    const timer1 = setTimeout(() => setSplashPhase(\"visible\"), 100)\n    const timer2 = setTimeout(() => setSplashPhase(\"exiting\"), 4000)\n    const timer3 = setTimeout(() => setShowSplash(false), 4500)\n    return () => {\n      clearTimeout(timer1)\n      clearTimeout(timer2)\n      clearTimeout(timer3)\n    }\n  }, [invite])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-dvh flex items-center justify-center bg-white dark:bg-gray-950\">\n        <div className=\"w-10 h-10 border-3 border-gray-200 border-t-pink-400 rounded-full animate-spin\" />\n      </div>\n    )\n  }\n\n  if (error || !invite) {\n    return (\n      <div className=\"min-h-dvh flex flex-col items-center justify-center bg-white dark:bg-gray-950 px-6\">\n        <div className=\"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-6\">\n          <Heart className=\"w-8 h-8 text-gray-400\" />\n        </div>\n        <h1 className=\"text-[22px] font-bold text-[#191F28] dark:text-gray-100 mb-2\">\n          초대를 찾을 수 없어요\n        </h1>\n        <p className=\"text-[14px] text-[#8B95A1] dark:text-gray-400 text-center mb-8\">\n          {error || \"유효하지 않거나 만료된 초대 링크입니다\"}\n        </p>\n        <Link\n          href=\"/\"\n          className=\"px-6 py-3 bg-[#191F28] dark:bg-gray-700 text-white rounded-[14px] font-semibold flex items-center gap-2\"\n          data-testid=\"link-go-home\"\n        >\n          <Home className=\"w-4 h-4\" />\n          홈으로 이동\n        </Link>\n      </div>\n    )\n  }\n\n  const mode = (invite.mode as \"dating\" | \"wedding\" | \"family\") || \"dating\"\n  const config = MODE_CONFIG[mode]\n  const inviterName = invite.inviterName || \"상대방\"\n\n  if (showSplash) {\n    return (\n      <div className={`min-h-dvh flex flex-col items-center justify-center bg-gradient-to-b ${config.bgGradient} ${config.darkBgGradient} px-6 overflow-hidden`}>\n        <div\n          className={`flex flex-col items-center transition-all duration-700 ${\n            splashPhase === \"entering\"\n              ? \"opacity-0 scale-90 translate-y-8\"\n              : splashPhase === \"visible\"\n              ? \"opacity-100 scale-100 translate-y-0\"\n              : \"opacity-0 scale-95 -translate-y-4\"\n          }`}\n        >\n          <div className=\"relative mb-8\">\n            <div className={`w-28 h-28 rounded-full bg-gradient-to-br ${config.gradient} flex items-center justify-center shadow-lg`}>\n              <Heart className=\"w-12 h-12 text-white fill-white\" />\n            </div>\n            <Sparkles className={`absolute -top-2 -right-2 w-7 h-7 ${config.sparkleColor} animate-pulse`} />\n            <Sparkles className={`absolute -bottom-1 -left-3 w-5 h-5 ${config.sparkleColor} animate-pulse delay-300`} />\n          </div>\n\n          <p className=\"text-[20px] font-bold text-[#191F28] dark:text-gray-100 text-center leading-relaxed\" data-testid=\"text-welcome-message\">\n            환영해요! {inviterName}님과의<br />\n            {config.welcomeAction}을 위해<br />\n            <span className={`${config.iconColor}`}>위브</span>가 도와줄게요!\n          </p>\n        </div>\n\n        <div\n          className={`absolute bottom-12 transition-all duration-500 delay-1000 ${\n            splashPhase === \"visible\" ? \"opacity-100\" : \"opacity-0\"\n          }`}\n        >\n          <p className=\"text-[13px] text-[#B0B8C1] dark:text-gray-500 animate-pulse\">\n            잠시 후 이동합니다...\n          </p>\n        </div>\n\n        <style jsx>{`\n          .delay-300 { animation-delay: 300ms; }\n        `}</style>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`min-h-dvh bg-gradient-to-b ${config.bgGradient} ${config.darkBgGradient} flex flex-col items-center justify-center px-6`}>\n      <div className=\"w-full max-w-sm\">\n        <div className=\"text-center mb-8\">\n          <div className={`w-20 h-20 rounded-full bg-gradient-to-br ${config.gradient} flex items-center justify-center mx-auto mb-5 shadow-lg`}>\n            <Heart className=\"w-8 h-8 text-white fill-white\" />\n          </div>\n          <h1 className=\"text-[24px] font-bold text-[#191F28] dark:text-gray-100 mb-2\">\n            WE:VE\n          </h1>\n          <p className=\"text-[15px] text-[#4E5968] dark:text-gray-300\">\n            {inviterName}님이 초대했어요\n          </p>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-[20px] p-6 shadow-sm mb-5\">\n          <h2 className=\"text-[17px] font-bold text-[#191F28] dark:text-gray-100 mb-3\">\n            함께 시작해볼까요?\n          </h2>\n          <p className=\"text-[14px] text-[#8B95A1] dark:text-gray-400 leading-relaxed mb-5\">\n            WE:VE에서 {inviterName}님과 함께 {config.welcomeAction}을 시작해보세요.\n            일정 관리, 사진 공유, D-day 추적 등 다양한 기능이 준비되어 있어요.\n          </p>\n\n          <button\n            onClick={async () => {\n              if (isAccepting) return\n              setIsAccepting(true)\n              try {\n                const res = await fetch(\"/api/invite/set-cookie\", {\n                  method: \"POST\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ code }),\n                })\n                if (!res.ok) {\n                  setError(\"쿠키 설정에 실패했습니다. 다시 시도해주세요.\")\n                  setIsAccepting(false)\n                  return\n                }\n                router.push(\"/login\")\n              } catch {\n                setError(\"네트워크 오류가 발생했습니다. 다시 시도해주세요.\")\n                setIsAccepting(false)\n              }\n            }}\n            disabled={isAccepting}\n            className={`w-full py-4 ${config.buttonBg} text-white font-bold rounded-[14px] transition-all flex items-center justify-center gap-2 text-[15px] disabled:opacity-60`}\n            data-testid=\"button-accept-invite\"\n          >\n            {isAccepting ? \"이동 중...\" : \"초대 수락하기\"}\n            {!isAccepting && <ArrowRight className=\"w-4 h-4\" />}\n          </button>\n        </div>\n\n        <p className=\"text-center text-[12px] text-[#B0B8C1] dark:text-gray-500\">\n          이미 계정이 있다면 로그인 후 자동으로 연결됩니다\n        </p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}