(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86192,e=>{"use strict";var t=e.i(29511),r=e.i(58138);let i=(0,r.createContext)(void 0);function a({children:e}){let[a,o]=(0,r.useState)([]),[d,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c()},[]);let c=async()=>{s(!0);try{let e=await fetch("/api/checklist?userId=default&mode=wedding"),t=await e.json();o(t.map(e=>({id:String(e.id),title:e.title,category:e.category,dueDate:e.dueDate?e.dueDate.split("T")[0]:new Date().toISOString().split("T")[0],completed:e.completed,priority:e.priority||"medium"})))}catch(e){console.error("Error fetching checklist:",e)}finally{s(!1)}},n=async e=>{try{let t=await fetch("/api/checklist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",title:e.title,category:e.category,dueDate:e.dueDate,priority:e.priority,mode:"wedding"})}),r=await t.json();o(e=>[...e,{id:String(r.id),title:r.title,category:r.category,dueDate:r.dueDate?r.dueDate.split("T")[0]:new Date().toISOString().split("T")[0],completed:r.completed,priority:r.priority||"medium"}])}catch(e){console.error("Error adding checklist item:",e)}},l=async(e,t)=>{try{await fetch("/api/checklist",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:parseInt(e),...t})}),o(r=>r.map(r=>r.id===e?{...r,...t}:r))}catch(e){console.error("Error updating checklist item:",e)}},u=async e=>{try{await fetch(`/api/checklist?id=${e}`,{method:"DELETE"}),o(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting checklist item:",e)}},p=async e=>{let t=a.find(t=>t.id===e);if(t)try{await fetch("/api/checklist",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:parseInt(e),completed:!t.completed})}),o(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t))}catch(e){console.error("Error toggling checklist item:",e)}},h=a.filter(e=>e.completed).length,m=a.length,g=m>0?Math.round(h/m*100):0;return(0,t.jsx)(i.Provider,{value:{items:a,setItems:o,addItem:n,updateItem:l,deleteItem:u,toggleComplete:p,isLoading:d,completedCount:h,totalCount:m,progressPercent:g},children:e})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useChecklist must be used within a ChecklistProvider");return e}e.s(["ChecklistProvider",()=>a,"useChecklist",()=>o])},51638,e=>{"use strict";var t=e.i(29511),r=e.i(58138);let i=(0,r.createContext)(void 0),a="wedding_budget_data";function o({children:e}){let[o,d]=(0,r.useState)(0),[s,c]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{h(),u()},[]);let u=()=>{try{let e=localStorage.getItem(a);if(e){let t=JSON.parse(e);if(t.totalBudget)return void d(t.totalBudget)}let t=localStorage.getItem("wedding_budget");if(t){let e=Number(t);e>0&&(d(e),p(e))}}catch(e){console.error("Failed to load budget data:",e)}},p=e=>{try{localStorage.setItem(a,JSON.stringify({totalBudget:e}))}catch(e){console.error("Failed to save budget data:",e)}},h=async()=>{l(!0);try{let e=await fetch("/api/expenses?userId=default&mode=wedding"),t=await e.json();c(t.map(e=>({id:String(e.id),title:e.title,amount:Number(e.amount),category:e.category,date:e.date.split("T")[0],payer:"shared",status:e.isPaid?"paid":"scheduled",method:"card",memo:e.memo})))}catch(e){console.error("Error fetching expenses:",e)}finally{l(!1)}},m=async e=>{try{let t=await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",title:e.title,amount:e.amount,category:e.category,date:e.date,isPaid:"paid"===e.status,memo:e.memo,mode:"wedding"})}),r=await t.json();c(t=>[{id:String(r.id),title:r.title,amount:Number(r.amount),category:r.category,date:r.date.split("T")[0],payer:e.payer,status:r.isPaid?"paid":"scheduled",method:e.method,memo:r.memo},...t])}catch(e){console.error("Error adding expense:",e)}},g=async(e,t)=>{try{let r={id:parseInt(e),...t};void 0!==t.status&&(r.isPaid="paid"===t.status),await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c(r=>r.map(r=>r.id===e?{...r,...t}:r))}catch(e){console.error("Error updating expense:",e)}},y=async e=>{try{await fetch(`/api/expenses?id=${e}`,{method:"DELETE"}),c(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting expense:",e)}},f=s.filter(e=>"paid"===e.status).reduce((e,t)=>e+t.amount,0),S=s.filter(e=>"scheduled"===e.status).reduce((e,t)=>e+(t.deposit||0),0),w=f+S,T=s.filter(e=>"scheduled"===e.status).reduce((e,t)=>e+(t.balance||t.amount),0),E=o>0?Math.round(w/o*100):0,b=o>0?Math.round(T/o*100):0;return(0,t.jsx)(i.Provider,{value:{totalBudget:o,setTotalBudget:e=>{d(e),p(e)},expenses:s,setExpenses:c,addExpense:m,updateExpense:g,deleteExpense:y,isLoading:n,totalPaid:f,totalDeposits:S,totalSpent:w,totalScheduled:T,remaining:o-w-T,spentPercent:E,scheduledPercent:b},children:e})}function d(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useBudget must be used within a BudgetProvider");return e}e.s(["BudgetProvider",()=>o,"useBudget",()=>d])}]);