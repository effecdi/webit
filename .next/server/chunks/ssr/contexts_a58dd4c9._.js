module.exports=[8621,a=>{"use strict";var b=a.i(64781),c=a.i(89982);let d=(0,c.createContext)(void 0);function e({children:a}){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0);(0,c.useEffect)(()=>{i()},[]);let i=async()=>{h(!0);try{let a=await fetch("/api/checklist?userId=default&mode=wedding"),b=await a.json();f(b.map(a=>({id:String(a.id),title:a.title,category:a.category,dueDate:a.dueDate?a.dueDate.split("T")[0]:new Date().toISOString().split("T")[0],completed:a.completed,priority:a.priority||"medium"})))}catch(a){console.error("Error fetching checklist:",a)}finally{h(!1)}},j=async a=>{try{let b=await fetch("/api/checklist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",title:a.title,category:a.category,dueDate:a.dueDate,priority:a.priority,mode:"wedding"})}),c=await b.json();f(a=>[...a,{id:String(c.id),title:c.title,category:c.category,dueDate:c.dueDate?c.dueDate.split("T")[0]:new Date().toISOString().split("T")[0],completed:c.completed,priority:c.priority||"medium"}])}catch(a){console.error("Error adding checklist item:",a)}},k=async(a,b)=>{try{await fetch("/api/checklist",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:parseInt(a),...b})}),f(c=>c.map(c=>c.id===a?{...c,...b}:c))}catch(a){console.error("Error updating checklist item:",a)}},l=async a=>{try{await fetch(`/api/checklist?id=${a}`,{method:"DELETE"}),f(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting checklist item:",a)}},m=async a=>{let b=e.find(b=>b.id===a);if(b)try{await fetch("/api/checklist",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:parseInt(a),completed:!b.completed})}),f(b=>b.map(b=>b.id===a?{...b,completed:!b.completed}:b))}catch(a){console.error("Error toggling checklist item:",a)}},n=e.filter(a=>a.completed).length,o=e.length,p=o>0?Math.round(n/o*100):0;return(0,b.jsx)(d.Provider,{value:{items:e,setItems:f,addItem:j,updateItem:k,deleteItem:l,toggleComplete:m,isLoading:g,completedCount:n,totalCount:o,progressPercent:p},children:a})}function f(){let a=(0,c.useContext)(d);if(void 0===a)throw Error("useChecklist must be used within a ChecklistProvider");return a}a.s(["ChecklistProvider",()=>e,"useChecklist",()=>f])},16520,a=>{"use strict";var b=a.i(64781),c=a.i(89982);let d=(0,c.createContext)(void 0),e="wedding_budget_data";function f({children:a}){let[f,g]=(0,c.useState)(0),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0);(0,c.useEffect)(()=>{n(),l()},[]);let l=()=>{try{let a=localStorage.getItem(e);if(a){let b=JSON.parse(a);if(b.totalBudget)return void g(b.totalBudget)}let b=localStorage.getItem("wedding_budget");if(b){let a=Number(b);a>0&&(g(a),m(a))}}catch(a){console.error("Failed to load budget data:",a)}},m=a=>{try{localStorage.setItem(e,JSON.stringify({totalBudget:a}))}catch(a){console.error("Failed to save budget data:",a)}},n=async()=>{k(!0);try{let a=await fetch("/api/expenses?userId=default&mode=wedding"),b=await a.json();i(b.map(a=>({id:String(a.id),title:a.title,amount:Number(a.amount),category:a.category,date:a.date.split("T")[0],payer:"shared",status:a.isPaid?"paid":"scheduled",method:"card",memo:a.memo})))}catch(a){console.error("Error fetching expenses:",a)}finally{k(!1)}},o=async a=>{try{let b=await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",title:a.title,amount:a.amount,category:a.category,date:a.date,isPaid:"paid"===a.status,memo:a.memo,mode:"wedding"})}),c=await b.json();i(b=>[{id:String(c.id),title:c.title,amount:Number(c.amount),category:c.category,date:c.date.split("T")[0],payer:a.payer,status:c.isPaid?"paid":"scheduled",method:a.method,memo:c.memo},...b])}catch(a){console.error("Error adding expense:",a)}},p=async(a,b)=>{try{let c={id:parseInt(a),...b};void 0!==b.status&&(c.isPaid="paid"===b.status),await fetch("/api/expenses",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),i(c=>c.map(c=>c.id===a?{...c,...b}:c))}catch(a){console.error("Error updating expense:",a)}},q=async a=>{try{await fetch(`/api/expenses?id=${a}`,{method:"DELETE"}),i(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting expense:",a)}},r=h.filter(a=>"paid"===a.status).reduce((a,b)=>a+b.amount,0),s=h.filter(a=>"scheduled"===a.status).reduce((a,b)=>a+(b.deposit||0),0),t=r+s,u=h.filter(a=>"scheduled"===a.status).reduce((a,b)=>a+(b.balance||b.amount),0),v=f>0?Math.round(t/f*100):0,w=f>0?Math.round(u/f*100):0;return(0,b.jsx)(d.Provider,{value:{totalBudget:f,setTotalBudget:a=>{g(a),m(a)},expenses:h,setExpenses:i,addExpense:o,updateExpense:p,deleteExpense:q,isLoading:j,totalPaid:r,totalDeposits:s,totalSpent:t,totalScheduled:u,remaining:f-t-u,spentPercent:v,scheduledPercent:w},children:a})}function g(){let a=(0,c.useContext)(d);if(void 0===a)throw Error("useBudget must be used within a BudgetProvider");return a}a.s(["BudgetProvider",()=>f,"useBudget",()=>g])}];

//# sourceMappingURL=contexts_a58dd4c9._.js.map